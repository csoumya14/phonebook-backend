(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=t(14),l=t(2),i=t(3),s=t.n(i),m="/api/persons",d=function(){return s.a.get(m).then((function(e){return e.data}))},f=function(e){return console.log("In person.create newObject: ".concat(e)),s.a.post(m,e).then((function(e){return e.data}))},h=function(e,n){return console.log("In person.update, id: ".concat(e,", newObject: ").concat(n)),s.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},g=function(e){var n=e.person,t=e.deleteFunction;return r.a.createElement("tr",null,r.a.createElement("td",null,n.name," "),r.a.createElement("td",null,n.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:t},"Delete")))},p=function(e){var n=e.persons,t=e.searchString,a=e.deleteButton;if(0===n.length)return null;var o=""===t?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return r.a.createElement("table",null,r.a.createElement("tbody",null,o.map((function(e){return r.a.createElement(g,{person:e,key:e.id,deleteFunction:function(){return a(e)}})}))))},v=function(e){var n=e.searchString,t=e.handleSearchStringChange;return r.a.createElement("div",null,"filter shown with"," ",r.a.createElement("input",{value:n,onChange:t}))},E=function(e){var n=e.addName,t=e.handleNameChange,a=e.handleNumberChange,o=e.newName,c=e.newNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:t,value:o})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:a,value:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},w=function(e){var n=e.message,t=e.messageType;return null===n||null==t?null:"success"===t?r.a.createElement("div",{className:"success"},n):"error"===t?r.a.createElement("div",{className:"error"},n):void 0},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),s=i[0],m=i[1],g=Object(a.useState)(""),j=Object(l.a)(g,2),N=j[0],O=j[1],S=Object(a.useState)(""),C=Object(l.a)(S,2),y=C[0],k=C[1],I=Object(a.useState)(null),T=Object(l.a)(I,2),L=T[0],B=T[1],D=Object(a.useState)(null),F=Object(l.a)(D,2),J=F[0],x=F[1];Object(a.useEffect)((function(){console.log("effect"),d().then((function(e){console.log("promise fulfilled"),o(e)}))}),[]),console.log("render",t.length,"persons");var P=function(){B(null),x(null)},R=function(e){B(e),x("success"),setTimeout((function(){return P()}),5e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(w,{message:L,messageType:J}),r.a.createElement(v,{handleSearchStringChange:function(e){k(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(E,{handleNameChange:function(e){m(e.target.value)},handleNumberChange:function(e){O(e.target.value)},addName:function(e){e.preventDefault();var n={name:s,number:N,id:t.length+1};console.log("persons",t);var a=t.find((function(e){return e.name.toLowerCase()===s.toLowerCase()}));a?(console.log("In addName - in if  branch - persons",t),window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&(!function(e){var n=t.find((function(n){return n.id===e.id})),a=Object(u.a)({},n,{number:N});h(e.id,a).then((function(n){o(t.map((function(t){return t.id!==e.id?t:n}))),m(""),O("")}))}(a),R("The number of ".concat(a.name," has been changed.")))):(console.log("In addName - in else branch - persons",t),f(n).then((function(e){o(t.concat(e)),console.log("In addName - in else branch - persons",t),m(""),O(""),R("Successfully added ".concat(e.name))})))},newName:s,newNumber:N}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(p,{persons:t,searchString:y,deleteButton:function(e){if(window.confirm("Delete ".concat(e.name," ?"))){console.log(e.name);var n=t.find((function(n){return n.id===e.id}));b(e.id).then((function(){o(t.filter((function(n){return n.id!==e.id}))),R("Removed ".concat(e.name))})).catch((function(a){o(t.filter((function(n){return n.id!==e.id}))),function(e){B(e),x("error"),setTimeout((function(){return P()}),3e3)}("Information of ".concat(n.name," has already been removed from server"))}))}}}))};t(37);c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.4e1aa7b0.chunk.js.map